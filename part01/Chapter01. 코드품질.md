# 1. 코드 품질

## 1.1 코드는 어떻게 소프트웨어가 되는가

소프트웨어는 코드로 만들어진다. 코드는 일반적으로 엔지니어가 작성하자마자 실제로 실행되는 소프트웨어가 되는 것이 아니다. 코드가 의도한 대로 작동하고

기존의 기능이 여전히 잘 작동한다고 확신하기 위한 다양한 과정과 점검이 이루어지고 이러한 과정을 소프트웨어 개발 및 배포 프로세스라고 부른다. 

## 1.2 코드 품질의 목표

이 책의 필자는 코드를 작성할 때 다음과 같은 네 가지 상위 수준의 목표를 달성하려고 함. 

1. 작동해야 한다
2. 작동이 멈춰서는 안 된다
3. 변화하는 요구사항에 적응해야 한다
4. 이미 존재하는 기능을 또 다시 구현해서는 안 된다

### 1.2.1 코드는 작동해야 한다

코드를 작성하는 이유는 문제를 해결하기 위함이다. 예를 들어 기능 구현, 버그 수정, 작업 수행과 같은 것이다. 코드의 첫 번째 목표는 작성된 목적대로 동작해야 한다는 것이다.

코드는 우리가 해결하려고 하는 문제를 실제로 해결해야 한다. (이것은 버그가 없다는 것을 의미 버그가 있다면 문제를 완전히 해결하지 못할 가능성이 있기 때문)

### 1.2.2 코드는 작동이 멈추면 안 된다

코드는 고립된 환경에서 홀로 실행되는 것이 아니다. 주의하지 않으면 주변 상황이 바뀌면서 동작이 멈출 수 있다

- 코드는 다른 코드에 의존할 수 있는데, 그 코드가 수정되고 변경될 수 있다
- 새로운 기능이 필요할 때 코드를 수정해야 할 수도 있다
- 해결하려고 하는 문제는 시간이 지남에 따라 변경되며, 소비자 선호, 비즈니스 요구, 고려해야할 기술 등이 바뀔 수 있다

현재는 잘 돌아가지만 미래에 이런 것 중 하나가 변경된 경우, 제대로 동작하지 않는다면 그 코드는 별로 유용한 코드가 아니다. 

### 1.2.3 코드는 변경된 요구사항에 적응할 수 있어야 한다

한 번 작성하고 다시는 수정되지 않는 코드는 거의 없다. 때로는 수십년 동안 동일한 소프트웨어를 지속적으로 개발할 수 있다. 이 과정에서 요구사항은 계속 변한다

- 비즈니스 환경이 변한다
- 사용자 선호가 변한다
- 가정이 더 이상 유효하지 않다
- 새로운 기능이 계속 추가된다

이후에 코드가 어떻게 적응해야 할지 미리 정확히 알지 못해도, 적응성 높은 코드를 작성하기 위해 채택할 수 있는 몇가지 기술이 있다. 이책에서 다룰 것임..!

### 1.2.4 코드는 이미 존재하는 기능을 중복 구현해서는 안 된다

기존 해결책을 무시하고 자기가 다시 작성하는 대신 이미 구현된 코드를 재사용하면 좋은 몇 가지 이유가 있다

- `시간과 노력을 절약한다`
- `버그 가능성을 줄여준다`
- `기존 전문지식을 활용한다`
- `코드가 이해하기 쉽다`

이미 있는 코드는 다시 작성하지 않는다는 개념은 양방향으로 적용된다. 어떤 하위 수준의 문제를 해결하기 위해 다른 개발자가 이미 코드를 작성했다면, 그것을

해결하기 위해 자신의 코드를 작성하기 보다는 그 코드를 사용해야 한다. 마찬가지로 어떤 하위 문제를 해결하기 위해 자신이 이미 코드를 작성했다면,

다른 개발자들이 동일한 문제를 해결하기 위해 자신만의 코드를 다시 작성하지 않도록 쉽게 재사용할 수 있는 방식으로 코드를 구성해야 한다.

## 1.3 코드 품질의 핵심 요소

1. `코드는 읽기 쉬워야 한다`
2. `코드는 예측 가능해야 한다`
3. `코드를 오용하기 어렵게 만들라`
4. `코드를 모듈화하라`
5. `코드를 재사용 가능하고 일반화할 수 있게 작성하라`
6. `테스트가 용이한 코드를 작성하고, 제대로 테스트하라`

### 1.3.1 코드는 읽기 쉬워야 한다

코드의 가독성이 떨어진다면, 다른 개발자가 그 코드를 이해하는 데 많은 시간을 들여야 한다.

또한, 코드의 기능에 대해 잘못 이해하거나 몇 가지 중요한 세부 사항을 놓칠 가능성 역시 크다. 이런 일이 일어나면 검토 중 버그를 발견할 가능성이 작고,

새로운 기능을 추가하기 위해 다른사람이 코드를 수정할 때 새로운 버그가 도입될 가능성이 크다. 코드가 무엇을 하는지 개발자가 이해하지 못하면, 소프트웨어 전체가

제대로 작동하는 것은 거의 불가능에 가깝다.

### 1.3.2 코드는 예측 가능해야 한다

아무리 좋은 의도를 가지고 있더라도 예상을 벗어난 동작을 수행하는 위험이 있을 수 있다. 코드가 예상에서 벗어나는 일을 한다면, 그 코드를 사용하는

개발자는 그 상황을 알지 못하거나 그 상황에 대처할 생각을 하지 못할 것이다. 이런 코드는 사소한 오류를 일으킬 수도 있지만, 어떤 경우에는 중요한 데이터가

손상되는 재앙과도 같은 상황을 초래할 수도 있다.

### 1.3.3 코드를 오용하기 어렵게 만들라

자신이 작성하는 코드는 종종 다른 코드에 의해 호출되는데, 이것은 TV 뒷면과 비슷하다. 자신의 코드를 작성할 때 다른 코드가 어떤것을 '꽂기'를 기대한다. 즉 호출할 때 인수가 입력되거나

시스템이 특정 상태에 있을 것을 예상한다. 자신이 작성한 코드에 잘못된 것들이 꽂히면 큰 문제가 일어나지는 않더라도 코드가 작동하지 않을 가능성이 크다.

코드를 오용하기 어렵거나 불가능하게 하면 코드가 작동할 뿐만 아니라 계속해서 잘 작동할 가능성을 극대화할 수 있다.

### 1.3.4 코드를 모듈화하라.

코드를 외부에 의존하지 않고 실행할 수 있는 모듈로 나누는 것이 이로울 때가 많다. 이때 두 개의 인접한 모듈 사이의 상호작용은 한 곳에서 일어나고 잘 정의된 인터페이스를 사용한다.

이렇게 하면 변화하는 요구사항에 더 쉽게 적응할 수 있는 코드를 작성하는 데 도움이 된다.

모듈화된 시스템은 일반적으로 이해하기 쉽고 추론하기 쉬운데, 기능이 관리 가능한 단위로 나누어지고 기능 단위 간 상호작용이 잘 정의되고 문서화되기 때문이다.

코드가 모듈화되어 작성되면 처음에 작동이 시작되고 그 후에도 계속해서 잘 작동할 가능성이 커지는데 코드가 하는 일을 개발자들이 오해할 소지가 적기 때문이다

### 1.3.5 코드를 재사용 가능하고 일반화할 수 있게 작성하라

재사용성과 일반화성은 유사하지만 다른 개념이다

- `재사용성`은 어떤 문제를 해결하기 위한 무언가가 여러 가지 다른 상황에서도 사용될 수 있음을 의미한다.
- `일반화성`은 개념적으로는 유사하지만 서로 미묘하게 다른 문제들을 해결할 수 있음을 의미한다.

<code>
    
    코드가 재사용할 수 있고 일반화되어 있으면 그 코드를 코드베이스의 여러 부분에서, 그리고 하나 이상의 상황에서 사용할 수 있고,

    여러 가지 문제를 해결할 수 있다. 이런 코드는 시간과 노력을 절약해주고 더 신뢰할 수 있는데, 그 이유는 실제 서비스 환경에서
    
    이미 시도되고 테스트된 논리를 재사용하기 때문이다. 
    
    즉, 어떤 버그라 할지라도 이미 발견되고 해결되었을 가능성이 크다는 것을 의미함.

</code>

### 1.3.6 테스트가 용이한 코드를 작성하고 제대로 테스트하라

버그와 제대로 동작하지 않는 기능을 가지는 코드가 실제 서비스 환경에서 실행되지 않도록 하는 프로세스에서

테스트는 중요한 부분을 차지한다. 테스트는 이 프로세스에서 두 가지 핵심 사항에 대한 주된 방어 수단이 될 때가 많다

- 버그나 제대로 동작하지 않는 기능을 갖는 코드가 코드베이스에 병합되지 않도록 방지
- 버그나 제대로 동작하지 않는 기능을 갖는 코드가 배포되지 않도록 막고 서비스 환경에서 실행되지 않도록 보장

따라서 테스트는 코드가 동작하고, 멈추지 않고 계속 잘 실행하도록 보장하기 위해 필수적인 부분이다.

# 요약

- 좋은 소프트웨어를 만들려면 고품질 코드를 작성해야 한다
- 실제 서비스 환경에서 실행되는 소프트웨어가 되기 전에 코드는 일반적으로 여러 단계의 검사와 테스트를 통과해야 한다
- 버그나 제대로 동작하지 않는 기능이 사용자에게 제공되거나 비즈니스에 중요한 시스템에서 실행되는 것을 이러한 검사를 통해 막을 수 있다
- 테스트는 코드를 작성하는 모든 단계에서 고려하는 것이 좋다. 코드를 다 작성하고 난 후에 고려하는 것이 아니다.
- 고품질 코드를 작성하면 처음에는 시간이 오래 걸리지만, 중장기적으로는 개발 시간이 단축되는 경우가 많다.
